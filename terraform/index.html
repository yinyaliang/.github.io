<!doctype html>
<html lang="zh" class="no-js">
  <head>
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3436206915764997"
     crossorigin="anonymous"></script>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Terraform 安装使用 - 尹亚亮</title>
<meta name="description" content="Terraform创建腾讯CVM">


  <meta name="author" content="Your Name">
  
  <meta property="article:author" content="Your Name">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="尹亚亮">
<meta property="og:title" content="Terraform 安装使用">
<meta property="og:url" content="/terraform/">


  <meta property="og:description" content="Terraform创建腾讯CVM">







  <meta property="article:published_time" content="2022-10-25T00:00:00+08:00">





  

  


<link rel="canonical" href="/terraform/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Your Name",
      "url": "/"
    
  }
</script>


  <meta name="google-site-verification" content="A4xb7189wuH7_ck4RBWFMcZetHQvGEtM6c4NkowkBXo" />




  <meta name="yandex-verification" content="b34490b8136e1c97">


  <meta name="naver-site-verification" content="bcc3391cbb77775a98167dd719a9653fad02042a">


  <meta name="baidu-site-verification" content="code-faatzlDIxD">

<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="尹亚亮 Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    
  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">转到主导航栏</a></li>
    <li><a href="#main" class="screen-reader-shortcut">转到内容</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">转到底部</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          尹亚亮
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/">归档</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">分类</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">切换菜单</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Terraform 安装使用">
    <meta itemprop="description" content="Terraform创建腾讯CVM">
    <meta itemprop="datePublished" content="2022-10-25T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="/terraform/" class="u-url" itemprop="url">Terraform 安装使用
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-10-25T00:00:00+08:00">October 25, 2022</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> 目录</h4></header>
              <ul class="toc__menu"><li><a href="#什么是terraform">什么是terraform</a></li><li><a href="#使用">使用</a></li><li><a href="#优势">优势</a></li><li><a href="#工作流程">工作流程</a></li><li><a href="#安装">安装</a><ul><li><a href="#安装-1">安装</a></li><li><a href="#验证">验证</a></li><li><a href="#补全">补全</a></li></ul></li><li><a href="#简单测试">简单测试</a></li><li><a href="#构建腾讯基础设施">构建腾讯基础设施</a><ul><li><a href="#初始化环境">初始化环境</a></li><li><a href="#创建一台cvm">创建一台CVM</a></li><li><a href="#测试执行">测试执行</a></li><li><a href="#执行创建">执行创建</a></li><li><a href="#查询实例数据">查询实例数据</a></li><li><a href="#删除实例数据">删除实例数据</a></li><li><a href="#无资源测试">无资源测试</a></li><li><a href="#无资源创建测试">无资源创建测试</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <p>Terraform创建腾讯CVM</p>

<h4 id="什么是terraform">什么是terraform</h4>

<p>HashiCorp Terraform 是一种基础架构即代码工具，可让在可读的配置文件中定义云和本地资源，可以对其进行版本控制、重用和共享。可以使用一致的工作流程在整个生命周期内配置和管理所有基础架构。Terraform 可以管理计算、存储和网络资源等低级组件，以及DNS 条目和 SaaS 功能等高级组件。</p>

<h4 id="使用">使用</h4>

<ul>
  <li>以_configurations_的形式获取凭证和输入，在目标云上创建一个资源,</li>
  <li>配置以Terraform的语法进行资源的描述。基本上是声明式的语法。</li>
  <li>Terraform使用云服务商提供的API来创建资源，社区提供了1700多个provider来提供管理（https://registry.terraform.io/）,支持扩展</li>
</ul>

<h4 id="优势">优势</h4>

<ul>
  <li>可以管理多个云平台上的基础架构</li>
  <li>时间优化，可以在短时间内编写配置，几分钟就可以创建云资源</li>
  <li>变更更容易了和改代码一样了</li>
  <li>Terraform 的状态允许在整个部署过程中跟踪资源更改</li>
  <li>支持版本控制</li>
</ul>

<h4 id="工作流程">工作流程</h4>

<p><img src="/assets/images/application/1.png" /></p>

<h4 id="安装">安装</h4>

<h5 id="安装-1">安装</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> yum-utils
<span class="nb">sudo </span>yum-config-manager <span class="nt">--add-repo</span> https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
<span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>terraform 
</code></pre></div></div>

<h5 id="验证">验证</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform -help</span>
Usage: terraform <span class="o">[</span>global options] &lt;subcommand&gt; <span class="o">[</span>args]

The available commands <span class="k">for </span>execution are listed below.
The primary workflow commands are given first, followed by
less common or more advanced commands.

Main commands:
  init          Prepare your working directory <span class="k">for </span>other commands
  validate      Check whether the configuration is valid
  plan          Show changes required by the current configuration
  apply         Create or update infrastructure
  destroy       Destroy previously-created infrastructure

All other commands:
  console       Try Terraform expressions at an interactive <span class="nb">command </span>prompt
  <span class="nb">fmt           </span>Reformat your configuration <span class="k">in </span>the standard style
  force-unlock  Release a stuck lock on the current workspace
  get           Install or upgrade remote Terraform modules
  graph         Generate a Graphviz graph of the steps <span class="k">in </span>an operation
  import        Associate existing infrastructure with a Terraform resource
  login         Obtain and save credentials <span class="k">for </span>a remote host
  <span class="nb">logout        </span>Remove locally-stored credentials <span class="k">for </span>a remote host
  output        Show output values from your root module
  providers     Show the providers required <span class="k">for </span>this configuration
  refresh       Update the state to match remote systems
  show          Show the current state or a saved plan
  state         Advanced state management
  taint         Mark a resource instance as not fully functional
  <span class="nb">test          </span>Experimental support <span class="k">for </span>module integration testing
  untaint       Remove the <span class="s1">'tainted'</span> state from a resource instance
  version       Show the current Terraform version
  workspace     Workspace management

Global options <span class="o">(</span>use these before the subcommand, <span class="k">if </span>any<span class="o">)</span>:
  <span class="nt">-chdir</span><span class="o">=</span>DIR    Switch to a different working directory before executing the
                given subcommand.
  <span class="nt">-help</span>         Show this <span class="nb">help </span>output, or the <span class="nb">help </span><span class="k">for </span>a specified subcommand.
  <span class="nt">-version</span>      An <span class="nb">alias </span><span class="k">for </span>the <span class="s2">"version"</span> subcommand.
</code></pre></div></div>

<h5 id="补全">补全</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> ~/.bashrc
terraform <span class="nt">-install-autocomplete</span>
</code></pre></div></div>

<h4 id="简单测试">简单测试</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir learn-terraform-docker-container
cd learn-terraform-docker-container
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;</span> main.tf <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "~&gt; 2.13.0"
    }
  }
}

provider "docker" {}

resource "docker_image" "nginx" {
  name         = "nginx:latest"
  keep_locally = false
}

resource "docker_container" "nginx" {
  image = docker_image.nginx.latest
  name  = "tutorial"
  ports {
    internal = 80
    external = 8000
  }
}
</span><span class="no">EOF
</span></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> terraform init
 terraform apply
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># curl localhost:8000
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker ps</span>
CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS                  NAMES
8fde98406749   5d58c024174d   <span class="s2">"/docker-entrypoint.…"</span>   About a minute ago   Up About a minute   0.0.0.0:8000-&gt;80/tcp   tutorial
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform destroy
</code></pre></div></div>

<h4 id="构建腾讯基础设施">构建腾讯基础设施</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir tencent
cd tencent
</code></pre></div></div>

<h5 id="初始化环境">初始化环境</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &gt; provider.tf &lt;&lt; EOF
terraform {
  required_providers {
    tencentcloud = {
      source = "tencentcloudstack/tencentcloud"
    }
  }
}

# Configure the TencentCloud Provider
provider "tencentcloud" {
  secret_id  = "my-secret-id"
  secret_key = "my-secret-key"
  region     = "ap-guangzhou"
}
EOF
</code></pre></div></div>

<h5 id="创建一台cvm">创建一台CVM</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resource "tencentcloud_instance" "web" {
  instance_name              = "test web server"
  availability_zone          = "ap-beijing-6"
  image_id                   = "img-hbbgxy7f"
  instance_type              = "S6.MEDIUM2"
  system_disk_type           = "CLOUD_PREMIUM"
  system_disk_size           = 50
  security_groups            = ["sg-4m6i7s6v"]
  count                      = 1
}
</code></pre></div></div>

<h5 id="测试执行">测试执行</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform plan</span>
Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the
following symbols:
  + create

Terraform will perform the following actions:

  <span class="c"># tencentcloud_instance.web[0] will be created</span>
  + resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
      + allocate_public_ip                      <span class="o">=</span> <span class="nb">false</span>
      + availability_zone                       <span class="o">=</span> <span class="s2">"ap-beijing-6"</span>
      + create_time                             <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + disable_monitor_service                 <span class="o">=</span> <span class="nb">false</span>
      + disable_security_service                <span class="o">=</span> <span class="nb">false</span>
      + expired_time                            <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + force_delete                            <span class="o">=</span> <span class="nb">false</span>
      + <span class="nb">id</span>                                      <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + image_id                                <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span>
      + instance_charge_type                    <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span>
      + instance_charge_type_prepaid_renew_flag <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_name                           <span class="o">=</span> <span class="s2">"test web server"</span>
      + instance_status                         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_type                           <span class="o">=</span> <span class="s2">"S6.MEDIUM2"</span>
      + internet_charge_type                    <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + internet_max_bandwidth_out              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_ids                                 <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_name                                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + private_ip                              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + project_id                              <span class="o">=</span> 0
      + public_ip                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + running_flag                            <span class="o">=</span> <span class="nb">true</span>
      + security_groups                         <span class="o">=</span> <span class="o">[</span>
          + <span class="s2">"sg-4m6i7s6v"</span>,
        <span class="o">]</span>
      + subnet_id                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_id                          <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_size                        <span class="o">=</span> 50
      + system_disk_type                        <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span>
      + vpc_id                                  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>

      + data_disks <span class="o">{</span>
          + data_disk_id           <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_size         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_snapshot_id  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_type         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + delete_with_instance   <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + encrypt                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + throughput_performance <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

Plan: 1 to add, 0 to change, 0 to destroy.
</code></pre></div></div>

<h5 id="执行创建">执行创建</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform apply</span>

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the
following symbols:
  + create

Terraform will perform the following actions:

  <span class="c"># tencentcloud_instance.web[0] will be created</span>
  + resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
      + allocate_public_ip                      <span class="o">=</span> <span class="nb">false</span>
      + availability_zone                       <span class="o">=</span> <span class="s2">"ap-beijing-6"</span>
      + create_time                             <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + disable_monitor_service                 <span class="o">=</span> <span class="nb">false</span>
      + disable_security_service                <span class="o">=</span> <span class="nb">false</span>
      + expired_time                            <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + force_delete                            <span class="o">=</span> <span class="nb">false</span>
      + <span class="nb">id</span>                                      <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + image_id                                <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span>
      + instance_charge_type                    <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span>
      + instance_charge_type_prepaid_renew_flag <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_name                           <span class="o">=</span> <span class="s2">"test web server"</span>
      + instance_status                         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_type                           <span class="o">=</span> <span class="s2">"S6.MEDIUM2"</span>
      + internet_charge_type                    <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + internet_max_bandwidth_out              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_ids                                 <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_name                                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + private_ip                              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + project_id                              <span class="o">=</span> 0
      + public_ip                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + running_flag                            <span class="o">=</span> <span class="nb">true</span>
      + security_groups                         <span class="o">=</span> <span class="o">[</span>
          + <span class="s2">"sg-4m6i7s6v"</span>,
        <span class="o">]</span>
      + subnet_id                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_id                          <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_size                        <span class="o">=</span> 50
      + system_disk_type                        <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span>
      + vpc_id                                  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>

      + data_disks <span class="o">{</span>
          + data_disk_id           <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_size         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_snapshot_id  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_type         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + delete_with_instance   <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + encrypt                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + throughput_performance <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span class="s1">'yes'</span> will be accepted to approve.

  Enter a value: <span class="nb">yes

</span>tencentcloud_instance.web[0]: Creating...
tencentcloud_instance.web[0]: Still creating... <span class="o">[</span>10s elapsed]
tencentcloud_instance.web[0]: Still creating... <span class="o">[</span>20s elapsed]
tencentcloud_instance.web[0]: Still creating... <span class="o">[</span>30s elapsed]
tencentcloud_instance.web[0]: Creation <span class="nb">complete </span>after 38s <span class="o">[</span><span class="nb">id</span><span class="o">=</span>ins-pvmqc3pr]

Apply <span class="nb">complete</span><span class="o">!</span> Resources: 1 added, 0 changed, 0 destroyed.
</code></pre></div></div>

<p><img src="/assets/images/application/2.png" /></p>

<h5 id="查询实例数据">查询实例数据</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform show</span>
<span class="c"># tencentcloud_instance.web[0]:</span>
resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
    allocate_public_ip         <span class="o">=</span> <span class="nb">false
    </span>availability_zone          <span class="o">=</span> <span class="s2">"ap-beijing-6"</span>
    create_time                <span class="o">=</span> <span class="s2">"2022-10-25T08:49:16Z"</span>
    disable_monitor_service    <span class="o">=</span> <span class="nb">false
    </span>disable_security_service   <span class="o">=</span> <span class="nb">false
    </span>force_delete               <span class="o">=</span> <span class="nb">false
    id</span>                         <span class="o">=</span> <span class="s2">"ins-pvmqc3pr"</span>
    image_id                   <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span>
    instance_charge_type       <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span>
    instance_name              <span class="o">=</span> <span class="s2">"test web server"</span>
    instance_status            <span class="o">=</span> <span class="s2">"RUNNING"</span>
    instance_type              <span class="o">=</span> <span class="s2">"S6.MEDIUM2"</span>
    internet_max_bandwidth_out <span class="o">=</span> 0
    key_ids                    <span class="o">=</span> <span class="o">[]</span>
    private_ip                 <span class="o">=</span> <span class="s2">"172.21.48.7"</span>
    project_id                 <span class="o">=</span> 0
    running_flag               <span class="o">=</span> <span class="nb">true
    </span>security_groups            <span class="o">=</span> <span class="o">[</span>
        <span class="s2">"sg-4m6i7s6v"</span>,
    <span class="o">]</span>
    subnet_id                  <span class="o">=</span> <span class="s2">"subnet-k8mir1zl"</span>
    system_disk_id             <span class="o">=</span> <span class="s2">"disk-2t8ene3n"</span>
    system_disk_size           <span class="o">=</span> 50
    system_disk_type           <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span>
    vpc_id                     <span class="o">=</span> <span class="s2">"vpc-bgsgnv7o"</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="删除实例数据">删除实例数据</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform destroy</span>
tencentcloud_instance.web[0]: Refreshing state... <span class="o">[</span><span class="nb">id</span><span class="o">=</span>ins-pvmqc3pr]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the
following symbols:
  - destroy

Terraform will perform the following actions:

  <span class="c"># tencentcloud_instance.web[0] will be destroyed</span>
  - resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
      - allocate_public_ip         <span class="o">=</span> <span class="nb">false</span> -&gt; null
      - availability_zone          <span class="o">=</span> <span class="s2">"ap-beijing-6"</span> -&gt; null
      - create_time                <span class="o">=</span> <span class="s2">"2022-10-25T08:49:16Z"</span> -&gt; null
      - disable_monitor_service    <span class="o">=</span> <span class="nb">false</span> -&gt; null
      - disable_security_service   <span class="o">=</span> <span class="nb">false</span> -&gt; null
      - force_delete               <span class="o">=</span> <span class="nb">false</span> -&gt; null
      - <span class="nb">id</span>                         <span class="o">=</span> <span class="s2">"ins-pvmqc3pr"</span> -&gt; null
      - image_id                   <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span> -&gt; null
      - instance_charge_type       <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span> -&gt; null
      - instance_name              <span class="o">=</span> <span class="s2">"test web server"</span> -&gt; null
      - instance_status            <span class="o">=</span> <span class="s2">"RUNNING"</span> -&gt; null
      - instance_type              <span class="o">=</span> <span class="s2">"S6.MEDIUM2"</span> -&gt; null
      - internet_max_bandwidth_out <span class="o">=</span> 0 -&gt; null
      - key_ids                    <span class="o">=</span> <span class="o">[]</span> -&gt; null
      - private_ip                 <span class="o">=</span> <span class="s2">"172.21.48.7"</span> -&gt; null
      - project_id                 <span class="o">=</span> 0 -&gt; null
      - running_flag               <span class="o">=</span> <span class="nb">true</span> -&gt; null
      - security_groups            <span class="o">=</span> <span class="o">[</span>
          - <span class="s2">"sg-4m6i7s6v"</span>,
        <span class="o">]</span> -&gt; null
      - subnet_id                  <span class="o">=</span> <span class="s2">"subnet-k8mir1zl"</span> -&gt; null
      - system_disk_id             <span class="o">=</span> <span class="s2">"disk-2t8ene3n"</span> -&gt; null
      - system_disk_size           <span class="o">=</span> 50 -&gt; null
      - system_disk_type           <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span> -&gt; null
      - tags                       <span class="o">=</span> <span class="o">{}</span> -&gt; null
      - vpc_id                     <span class="o">=</span> <span class="s2">"vpc-bgsgnv7o"</span> -&gt; null
    <span class="o">}</span>

Plan: 0 to add, 0 to change, 1 to destroy.

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only <span class="s1">'yes'</span> will be accepted to confirm.

  Enter a value: <span class="nb">yes

</span>tencentcloud_instance.web[0]: Destroying... <span class="o">[</span><span class="nb">id</span><span class="o">=</span>ins-pvmqc3pr]
tencentcloud_instance.web[0]: Still destroying... <span class="o">[</span><span class="nb">id</span><span class="o">=</span>ins-pvmqc3pr, 10s elapsed]
tencentcloud_instance.web[0]: Destruction <span class="nb">complete </span>after 11s

Destroy <span class="nb">complete</span><span class="o">!</span> Resources: 1 destroyed.
</code></pre></div></div>

<h5 id="无资源测试">无资源测试</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># terraform plan</span>

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the
following symbols:
  + create

Terraform will perform the following actions:

  <span class="c"># tencentcloud_instance.web[0] will be created</span>
  + resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
      + allocate_public_ip                      <span class="o">=</span> <span class="nb">false</span>
      + availability_zone                       <span class="o">=</span> <span class="s2">"ap-beijing-6"</span>
      + create_time                             <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + disable_monitor_service                 <span class="o">=</span> <span class="nb">false</span>
      + disable_security_service                <span class="o">=</span> <span class="nb">false</span>
      + expired_time                            <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + force_delete                            <span class="o">=</span> <span class="nb">false</span>
      + <span class="nb">id</span>                                      <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + image_id                                <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span>
      + instance_charge_type                    <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span>
      + instance_charge_type_prepaid_renew_flag <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_name                           <span class="o">=</span> <span class="s2">"test web server"</span>
      + instance_status                         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_type                           <span class="o">=</span> <span class="s2">"S5se.LARGE16"</span>
      + internet_charge_type                    <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + internet_max_bandwidth_out              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_ids                                 <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_name                                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + private_ip                              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + project_id                              <span class="o">=</span> 0
      + public_ip                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + running_flag                            <span class="o">=</span> <span class="nb">true</span>
      + security_groups                         <span class="o">=</span> <span class="o">[</span>
          + <span class="s2">"sg-4m6i7s6v"</span>,
        <span class="o">]</span>
      + subnet_id                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_id                          <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_size                        <span class="o">=</span> 50
      + system_disk_type                        <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span>
      + vpc_id                                  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>

      + data_disks <span class="o">{</span>
          + data_disk_id           <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_size         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_snapshot_id  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_type         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + delete_with_instance   <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + encrypt                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + throughput_performance <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

Plan: 1 to add, 0 to change, 0 to destroy.

───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn<span class="s1">'t use the -out option to save this plan, so Terraform can'</span>t guarantee to take exactly these actions <span class="k">if </span>you run
<span class="s2">"terraform apply"</span> now.
</code></pre></div></div>

<h5 id="无资源创建测试">无资源创建测试</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the
following symbols:
  + create

Terraform will perform the following actions:

  <span class="c"># tencentcloud_instance.web[0] will be created</span>
  + resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
      + allocate_public_ip                      <span class="o">=</span> <span class="nb">false</span>
      + availability_zone                       <span class="o">=</span> <span class="s2">"ap-beijing-6"</span>
      + create_time                             <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + disable_monitor_service                 <span class="o">=</span> <span class="nb">false</span>
      + disable_security_service                <span class="o">=</span> <span class="nb">false</span>
      + expired_time                            <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + force_delete                            <span class="o">=</span> <span class="nb">false</span>
      + <span class="nb">id</span>                                      <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + image_id                                <span class="o">=</span> <span class="s2">"img-hbbgxy7f"</span>
      + instance_charge_type                    <span class="o">=</span> <span class="s2">"POSTPAID_BY_HOUR"</span>
      + instance_charge_type_prepaid_renew_flag <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_name                           <span class="o">=</span> <span class="s2">"test web server"</span>
      + instance_status                         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + instance_type                           <span class="o">=</span> <span class="s2">"S5se.LARGE16"</span>
      + internet_charge_type                    <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + internet_max_bandwidth_out              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_ids                                 <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + key_name                                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + private_ip                              <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + project_id                              <span class="o">=</span> 0
      + public_ip                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + running_flag                            <span class="o">=</span> <span class="nb">true</span>
      + security_groups                         <span class="o">=</span> <span class="o">[</span>
          + <span class="s2">"sg-4m6i7s6v"</span>,
        <span class="o">]</span>
      + subnet_id                               <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_id                          <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
      + system_disk_size                        <span class="o">=</span> 50
      + system_disk_type                        <span class="o">=</span> <span class="s2">"CLOUD_PREMIUM"</span>
      + vpc_id                                  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>

      + data_disks <span class="o">{</span>
          + data_disk_id           <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_size         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_snapshot_id  <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + data_disk_type         <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + delete_with_instance   <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + encrypt                <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
          + throughput_performance <span class="o">=</span> <span class="o">(</span>known after apply<span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span class="s1">'yes'</span> will be accepted to approve.

  Enter a value: <span class="nb">yes

</span>tencentcloud_instance.web[0]: Creating...
╷
│ Error: <span class="o">[</span>TencentCloudSDKError] <span class="nv">Code</span><span class="o">=</span>ResourceInsufficient.SpecifiedInstanceType, <span class="nv">Message</span><span class="o">=</span>The specified <span class="nb">type </span>of instance is understocked., <span class="nv">RequestId</span><span class="o">=</span>c978845f-cd62-46d0-8b91-60d9aa13e889
│ 
│   with tencentcloud_instance.web[0],
│   on cvm.tf line 1, <span class="k">in </span>resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span>:
│    1: resource <span class="s2">"tencentcloud_instance"</span> <span class="s2">"web"</span> <span class="o">{</span>
│ 
╵
</code></pre></div></div>


        
      </section>

      <!-- <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 标签: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#application" class="page__taxonomy-item p-category" rel="tag">Application</a>
    
    </span>
  </p>



 
        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time class="dt-published" datetime="2022-10-25T00:00:00+08:00">October 25, 2022</time></p>
 
      </footer> -->

      <!-- <section class="page__share">
  
    <h4 class="page__share-title">分享</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Terraform+%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%20%2Fterraform%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=%2Fterraform%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=%2Fterraform%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>
 -->

      
  <nav class="pagination">
    
      <a href="/kubernetes-kubeadm-daemonset/" class="pagination--pager" title="Daemonset
">上一页</a>
    
    
      <a href="/monitor-kvm-cpumem/" class="pagination--pager" title="KVM 虚拟机资源采集
">下一页</a>
    
  </nav>

    </div>

     <div class="page__comments">
  
  
      <h4 class="page__comments-title">留下评论</h4>
      <section id="utterances-comments"></section>
    
</div>

  </article>

</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        
        <div class="page__footer-follow">
  多研究些问题，少谈些主义。
 </div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'yinyaliang/yinyaliang.github.io');
    script.setAttribute('issue-term', 'pathname');
    script.setAttribute('label', 'comment');
    script.setAttribute('theme', 'github-dark');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
